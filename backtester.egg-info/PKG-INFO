Metadata-Version: 2.4
Name: backtester
Version: 0.0.1
Summary: Deterministic trading backtester skeleton
Author: nicolas
License: MIT
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Operating System :: OS Independent
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: pydantic<3,>=2.4
Requires-Dist: polars>=0.20
Provides-Extra: dev
Requires-Dist: pytest==8.3.3; extra == "dev"
Requires-Dist: mypy==1.11.2; extra == "dev"
Requires-Dist: ruff==0.6.9; extra == "dev"
Requires-Dist: types-setuptools; extra == "dev"

Backtester v2 (Slice 0000)
=========================

Deterministic trading backtester skeleton. This initial slice provides:

- Port interface Protocols (Clock, EventBus, MarketDataProvider, OrderRouter, RiskEngine, SnapshotStore, RunManifestStore, PortfolioStore, ConfigProvider, SecretsProvider, Telemetry)
- CLI entrypoint `bt` with subcommands: backtest, shadow, paper, live (only `backtest --noop` implemented)
- Run manifest writer + JSONL telemetry stub.

Quick Start (development)
------------------------

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -e .[dev]
bt backtest --noop --out runs/example --seed 42
cat runs/example/run_manifest.json
```

CLI Usage
---------

After installation (`pip install -e .`), the `bt` console script is available. You can also invoke the module directly with `python -m backtester.cli.bt`.

```bash
# Display available commands
bt --help

# Run the noop pipeline (no market data), writing artifacts under runs/my_run
bt backtest --noop --out runs/my_run --seed 123

# Inspect telemetry emitted during the run
cat runs/my_run/events.log.jsonl

# Apply environment overrides (BT_ prefix, double underscores for nesting)
BT_RISK__MAX_POSITION=10 BT_SECRETS__API_KEY=topsecret bt backtest --noop --out runs/env_run

# Other modes are stubs today, but share the same flags
bt shadow --noop --out runs/shadow_probe --seed 99
```

Manifest Fields:

```json
{
	"id": "<uuid>",
	"timestamp": "<UTC ISO>",
	"version": "0.0.1",
	"seed": 42,
	"schema_version": 1,
	"mode": "noop"
}
```

Next Slices:
------------
See `docs/slices/` for planned incremental functionality (strategy loop, risk rails, observability, adapters).

Contributing / CI parity
------------------------
- Install hooks once: `pre-commit install && pre-commit install --hook-type pre-push`
- Commit hook: runs `ruff` auto-fixes on staged files
- Push hook + CI: runs `ruff check .`, `ruff format --check .`, `mypy .`
- Manual spot-check: `pre-commit run --hook-stage pre-push --all-files`
- Tests: `pytest -q`
